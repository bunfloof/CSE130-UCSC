#include <pthread.h>
#include <stdio.h>
#include <unistd.h>
#include "dining.h"
#include "utils.h"
int main(void) {
dining_t* d1 = dining_init(3);
student_t student1001 = make_student(1001, d1);
student_t student1002 = make_student(1002, d1);
student_t student1003 = make_student(1003, d1);
student_t student1004 = make_student(1004, d1);
student_t student1005 = make_student(1005, d1);
student_t student1006 = make_student(1006, d1);
cleaning_t cleaning1001 = make_cleaning(1001, d1);
cleaning_t cleaning1002 = make_cleaning(1002, d1);
cleaning_t cleaning1003 = make_cleaning(1003, d1);
cleaning_t cleaning1004 = make_cleaning(1004, d1);
cleaning_t cleaning1005 = make_cleaning(1005, d1);
cleaning_t cleaning1006 = make_cleaning(1006, d1);
pthread_create(&cleaning1001.thread, NULL, cleaning_enter, &cleaning1001);
msleep(100);
pthread_join(cleaning1001.thread, NULL);
pthread_create(&cleaning1001.thread, NULL, cleaning_leave, &cleaning1001);
pthread_join(cleaning1001.thread, NULL);
pthread_create(&student1001.thread, NULL, student_enter, &student1001);
pthread_join(student1001.thread, NULL);
msleep(100);
pthread_create(&student1001.thread, NULL, student_leave, &student1001);
pthread_create(&student1002.thread, NULL, student_enter, &student1002);
pthread_join(student1002.thread, NULL);
pthread_create(&cleaning1002.thread, NULL, cleaning_enter, &cleaning1002);
pthread_join(student1001.thread, NULL);
msleep(100);
pthread_create(&student1002.thread, NULL, student_leave, &student1002);
pthread_create(&student1003.thread, NULL, student_enter, &student1003);
pthread_create(&student1004.thread, NULL, student_enter, &student1004);
pthread_join(student1002.thread, NULL);
msleep(100);
pthread_join(cleaning1002.thread, NULL);
pthread_create(&student1005.thread, NULL, student_enter, &student1005);
msleep(100);
pthread_create(&cleaning1002.thread, NULL, cleaning_leave, &cleaning1002);
pthread_join(cleaning1002.thread, NULL);
pthread_join(student1003.thread, NULL);
msleep(100);
pthread_join(student1004.thread, NULL);
pthread_join(student1005.thread, NULL);
pthread_create(&student1006.thread, NULL, student_enter, &student1006);
pthread_create(&student1003.thread, NULL, student_leave, &student1003);
msleep(100);
pthread_join(student1006.thread, NULL);
pthread_join(student1003.thread, NULL);
pthread_create(&student1006.thread, NULL, student_leave, &student1006);
pthread_join(student1006.thread, NULL);
msleep(100);
pthread_create(&cleaning1003.thread, NULL, cleaning_enter, &cleaning1003);
pthread_create(&student1005.thread, NULL, student_leave, &student1005);
msleep(100);
pthread_join(student1005.thread, NULL);
pthread_create(&student1004.thread, NULL, student_leave, &student1004);
msleep(100);
pthread_join(student1004.thread, NULL);
pthread_join(cleaning1003.thread, NULL);
pthread_create(&cleaning1004.thread, NULL, cleaning_enter, &cleaning1004);
pthread_create(&cleaning1003.thread, NULL, cleaning_leave, &cleaning1003);
msleep(100);
pthread_join(cleaning1003.thread, NULL);
pthread_join(cleaning1004.thread, NULL);
pthread_create(&cleaning1004.thread, NULL, cleaning_leave, &cleaning1004);
msleep(100);
pthread_join(cleaning1004.thread, NULL);
pthread_create(&cleaning1005.thread, NULL, cleaning_enter, &cleaning1005);
msleep(100);
pthread_join(cleaning1005.thread, NULL);
pthread_create(&cleaning1005.thread, NULL, cleaning_leave, &cleaning1005);
msleep(100);
pthread_join(cleaning1005.thread, NULL);
pthread_create(&cleaning1006.thread, NULL, cleaning_enter, &cleaning1006);
pthread_join(cleaning1006.thread, NULL);
pthread_create(&cleaning1006.thread, NULL, cleaning_leave, &cleaning1006);
pthread_join(cleaning1006.thread, NULL);
msleep(100);
dining_destroy(&d1);
}
